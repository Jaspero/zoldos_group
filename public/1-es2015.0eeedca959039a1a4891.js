(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{sbAP:function(t,e,i){"use strict";function s(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{c(s.next(t))}catch(e){r(e)}}function a(t){try{c(s.throw(t))}catch(e){r(e)}}function c(t){t.done?n(t.value):new i((function(e){e(t.value)})).then(o,a)}c((s=s.apply(t,e||[])).next())}))}i.d(e,"a",(function(){return $}));var n=i("fXoL"),r=i("tyNb"),o=i("2Vo4"),a=i("5yfJ"),c=i("LRne"),u=i("XNiG"),l=i("3N8a");class h extends l.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(t,e,i):t.flush(this)}}var d=i("IjjT");class p extends d.a{}const b=new p(h);var f=i("quSY"),w=i("7o/Q"),v=i("WMd4");class m extends w.a{constructor(t,e,i=0){super(t),this.scheduler=e,this.delay=i}static dispatch(t){const{notification:e,destination:i}=t;e.observe(i),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(m.dispatch,this.delay,new S(t,this.destination)))}_next(t){this.scheduleMessage(v.a.createNext(t))}_error(t){this.scheduleMessage(v.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(v.a.createComplete()),this.unsubscribe()}}class S{constructor(t,e){this.notification=t,this.destination=e}}var _=i("9ppp"),y=i("Ylt2");class O extends u.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),super.next(t)}nextTimeWindow(t){this._events.push(new T(this._getNow(),t)),this._trimBufferThenGetEvents(),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,i=e?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,n=i.length;let r;if(this.closed)throw new _.a;if(this.isStopped||this.hasError?r=f.a.EMPTY:(this.observers.push(t),r=new y.a(this,t)),s&&t.add(t=new m(t,s)),e)for(let o=0;o<n&&!t.closed;o++)t.next(i[o]);else for(let o=0;o<n&&!t.closed;o++)t.next(i[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),r}_getNow(){return(this.scheduler||b).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,i=this._windowTime,s=this._events,n=s.length;let r=0;for(;r<n&&!(t-s[r].time<i);)r++;return n>e&&(r=Math.max(r,n-e)),r>0&&s.splice(0,r),s}}class T{constructor(t,e){this.time=t,this.value=e}}var I=i("pLZG"),x=i("eIep"),g=i("vkgz"),j=i("SxV6"),E=i("lJxs");function M(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return i=>Object(E.a)(function(t,e){return i=>{let s=i;for(let n=0;n<e;n++){const e=s[t[n]];if(void 0===e)return;s=e}return s}}(t,e))(i)}var N=i("IzEk");class B{constructor(t,e){this.predicate=t,this.inclusive=e}call(t,e){return e.subscribe(new U(t,this.predicate,this.inclusive))}}class U extends w.a{constructor(t,e,i){super(t),this.predicate=e,this.inclusive=i,this.index=0}_next(t){const e=this.destination;let i;try{i=this.predicate(t,this.index++)}catch(s){return void e.error(s)}this.nextOrComplete(t,i)}nextOrComplete(t,e){const i=this.destination;Boolean(e)?i.next(t):(this.inclusive&&i.next(t),i.complete())}}var A=i("JIr8"),L=i("ofXK");const C={useTransferState:!0,alwaysMonitor:!1,manualIdle:!1},P=new n.q("scullyLibConfig",{factory:()=>C});function R(t,e="json"){return new Promise((i,s)=>{const n=new XMLHttpRequest;n.responseType=e,n.addEventListener("load",t=>i(n.response)),n.addEventListener("error",(...t)=>s(t)),n.open("get",t,!0),n.send()})}const z=()=>window&&"running"===window.ScullyIO,W=()=>window&&"generated"===window.ScullyIO;let k=(()=>{class t{constructor(t,e){this.document=t,this.router=e,this.inlineOnly=!1,this.currentBaseUrl="//",this.stateBS=new o.a({}),this.state$=this.stateBS.pipe(Object(I.a)(t=>void 0!==t)),this.nextUrl=this.router.events.pipe(Object(I.a)(t=>t instanceof r.c),Object(x.a)(t=>this.initialUrl===t.url?(this.initialUrl="__done__with__Initial__navigation__",a.a):Object(c.a)(t)),Object(g.a)(()=>this.stateBS.next(void 0)),Object(x.a)(t=>this.router.events.pipe(Object(I.a)(e=>e instanceof r.b&&e.url===t.url),Object(j.a)())),Object(E.a)(t=>t.urlAfterRedirects||t.url),function(t,e,i){let s;return s={bufferSize:1,windowTime:void 0,refCount:!1,scheduler:void 0},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:i,scheduler:s}){let n,r,o=0,a=!1,c=!1;return function(u){o++,n&&!a||(a=!1,n=new O(t,e,s),r=u.subscribe({next(t){n.next(t)},error(t){a=!0,n.error(t)},complete(){c=!0,r=void 0,n.complete()}}));const l=n.subscribe(this);this.add(()=>{o--,l.unsubscribe(),r&&!c&&i&&0===o&&(r.unsubscribe(),r=void 0,n=void 0)})}}(s))}())}startMonitoring(){window&&window["ScullyIO-injected"]&&window["ScullyIO-injected"].inlineStateOnly&&(this.inlineOnly=!0),this.setupEnvForTransferState(),this.setupStartNavMonitoring()}setupEnvForTransferState(){if(z()){this.injectScript();const t=window["ScullyIO-exposed"]||{};t.transferState&&(this.stateBS.next(t.transferState),this.saveState(t.transferState))}else W()&&(this.initialUrl=window.location.pathname||"__no_NO_no__",this.initialUrl="/"!==this.initialUrl&&this.initialUrl.endsWith("/")?this.initialUrl.slice(0,-1):this.initialUrl,this.stateBS.next(window&&window["ScullyIO-transfer-state"]||{}))}injectScript(){this.script=this.document.createElement("script"),this.script.setAttribute("id","ScullyIO-transfer-state");let t=document.body.lastChild;for(;"SCRIPT"===t.previousSibling.nodeName;)t=t.previousSibling;document.body.insertBefore(this.script,t)}getState(t){return this.fetchTransferState(),this.state$.pipe(M(t))}stateHasKey(t){return this.stateBS.value&&this.stateBS.value.hasOwnProperty(t)}stateKeyHasValue(t){return this.stateBS.value&&this.stateBS.value.hasOwnProperty(t)&&null!=this.stateBS.value[t]}setState(t,e){const i=Object.assign(Object.assign({},this.stateBS.value),{[t]:e});this.stateBS.next(i),this.saveState(i)}saveState(t){z()&&(this.script.textContent=`window['ScullyIO-transfer-state']=/** ___SCULLY_STATE_START___ */${JSON.stringify(t)}/** ___SCULLY_STATE_END___ */`)}setupStartNavMonitoring(){W()&&this.nextUrl.subscribe()}useScullyTransferState(t,e){return W()?this.getState(t):e.pipe(Object(g.a)(e=>this.setState(t,e)))}fetchTransferState(){return s(this,void 0,void 0,(function*(){const t=t=>t.split("/").filter(t=>""!==t.trim())[0];yield new Promise(t=>setTimeout(t,0));const e=yield this.nextUrl.pipe(Object(N.a)(1)).toPromise(),i=t(e);this.currentBaseUrl!==i&&(this.currentBaseUrl=i,this.nextUrl.pipe(function(t,e=!1){return i=>i.lift(new B(t,e))}(e=>t(e)===this.currentBaseUrl),Object(x.a)(t=>this.inlineOnly?this.readFromIndex(t):this.readFromJson(t)),Object(A.a)(t=>(console.warn("Error while loading of parsing Scully state:",t),Object(c.a)({}))),Object(g.a)(t=>{this.stateBS.next(t)})).subscribe({complete:()=>{this.currentBaseUrl="//"}}))}))}readFromJson(t){return R((i="/data.json",(e=t).endsWith("/")&&i.startsWith("/")?`${e}${i.substr(1)}`:e.endsWith("/")||i.startsWith("/")?`${e}${i}`:`${e}/${i}`));var e,i}readFromIndex(t){return R(t+"/index.html","text").then(t=>{const e=t.split("/** ___SCULLY_STATE_START___ */")[1].split("/** ___SCULLY_STATE_END___ */")[0];return JSON.parse(e)})}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(L.c),n.Mb(r.d))},t.\u0275prov=Object(n.Db)({factory:function(){return new t(Object(n.Mb)(L.c),Object(n.Mb)(r.d))},token:t,providedIn:"root"}),t})();window;let F=(()=>{class t{constructor(t,e,i,s){var n;this.zone=t,this.router=e,this.initialUrl=((n=window&&window.location.pathname).endsWith("/")?n.slice(0,-1):n)||"",this.imState=new o.a({idle:!1,timeOut:5e3}),this.idle$=this.imState.pipe(M("idle")),this.initApp=new Event("AngularInitialized",{bubbles:!0,cancelable:!1}),this.appReady=new Event("AngularReady",{bubbles:!0,cancelable:!1}),this.appTimeout=new Event("AngularTimeout",{bubbles:!0,cancelable:!1}),this.scullyLibConfig=Object.assign({},C,i);const a=!!(window["ScullyIO-exposed"]||{}).manualIdle;!this.scullyLibConfig.manualIdle&&window&&(this.scullyLibConfig.alwaysMonitor||z())&&(window.dispatchEvent(this.initApp),this.router.events.pipe(Object(I.a)(t=>t instanceof r.b&&void 0!==t.urlAfterRedirects),Object(I.a)(t=>!a||t.urlAfterRedirects!==this.initialUrl),Object(g.a)(()=>this.zoneIdleCheck())).subscribe()),this.scullyLibConfig.manualIdle&&window.dispatchEvent(this.initApp),this.scullyLibConfig.useTransferState&&s.startMonitoring()}fireManualMyAppReadyEvent(){return s(this,void 0,void 0,(function*(){return window.dispatchEvent(this.appReady)}))}init(){return s(this,void 0,void 0,(function*(){return this.idle$.pipe(Object(N.a)(1)).toPromise()}))}zoneIdleCheck(){return s(this,void 0,void 0,(function*(){if(void 0===Zone)return this.simpleTimeout();const t=Zone.current.get("TaskTrackingZone");if(void 0===t)return this.simpleTimeout();this.imState.value.idle&&(yield this.setState("idle",!1)),this.zone.runOutsideAngular(()=>{let e,i=0;const s=Date.now(),n=()=>{clearTimeout(e),Date.now()-s>3e4?window.dispatchEvent(this.appTimeout):t.macroTasks.length>0&&void 0!==t.macroTasks.find(t=>t.source.includes("XMLHttpRequest"))||i<1?e=setTimeout(()=>{i+=1,n()},50):(window.dispatchEvent(this.appReady),this.setState("idle",!0))};n()})}))}simpleTimeout(){return s(this,void 0,void 0,(function*(){console.warn("Scully is using timeouts, add the needed polyfills instead!"),yield new Promise(t=>setTimeout(t,this.imState.value.timeOut)),window.dispatchEvent(this.appReady)}))}setPupeteerTimeoutValue(t){this.imState.next(Object.assign(Object.assign({},this.imState.value),{timeOut:t}))}setState(t,e){this.imState.next(Object.assign(Object.assign({},this.imState.value),{[t]:e}))}}return t.\u0275fac=function(e){return new(e||t)(n.Mb(n.z),n.Mb(r.d),n.Mb(P),n.Mb(k))},t.\u0275prov=Object(n.Db)({factory:function(){return new t(Object(n.Mb)(n.z),Object(n.Mb)(r.d),Object(n.Mb)(P),Object(n.Mb)(k))},token:t,providedIn:"root"}),t})(),Y=(()=>{class t{}return t.\u0275mod=n.Fb({type:t}),t.\u0275inj=n.Eb({factory:function(e){return new(e||t)}}),t})(),$=(()=>{class t{constructor(t){this.idle=t}static forRoot(e=C){return{ngModule:t,providers:[{provide:P,useValue:e}]}}}return t.\u0275mod=n.Fb({type:t}),t.\u0275inj=n.Eb({factory:function(e){return new(e||t)(n.Mb(F))},imports:[[Y],Y]}),t})()}}]);